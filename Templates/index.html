<!--extending the base template-->
{% extends 'base.html' %}
<!-- page title-->
{% block title %}
  Anime Recommender
{% endblock %}
{% block link %}
  <link rel="stylesheet" href="http://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
  <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
{% endblock %}
{% block page_heading%}
  Anime Recommender
  <!--Page heading-->
{% endblock %}
{% block content %}
  <div>
    <br>
    <!--form that recommends based on a previous anime that the user has watched -->
    <form class="form" action="{{ url_for('home')}}" method="post">
      <div class="Search_bar">
        {{form.csrf_token}}
        <div class="bar">
          {{form.autocomp}}
        </div>
        <div class="sub_button">
          <button type="submit" class="btn btn-primary">Search</button>
        </div>
      </div>
    </form>
    <br>
    <div>
    {%if data%}
      {%for i in data%}
        <div>
          {{i.uid}}
          {{i.title}}
          {{i.score}}
        </div>  
      {%endfor%}
    {%else%}
      The developer is a dumb hoe
    {%endif%}
  </div>
  </div>
{% endblock %}
{% block script%}
  <script>
    $(function() {
        $.ajax({
            url: '{{ url_for("autocomplete") }}'
            }).done(function (data){
                $('#anime_autocomplete').autocomplete({
                    source: data,
                    minLength: 2
                });
            });
        });
  </script>
{% endblock %}
{% block style %}
    <!--Style block-->
    <style>  
          #ui-id-1{
            height: 35%;
            overflow-y: auto;
          }

          .Search_bar{
            display: flex;
            justify-content: center;
          }
          .bar{
            width: 75%;
          }
          .sub_button{
            width: 15%;
          }
          .btn-primary{
            margin: auto;
            height: 35px;
          }
          #anime_autocomplete{
            width: 98%;
            height: 35px;
          }
    </style>
{% endblock %}